
#!/bin/sh
#  Generate projects for import that correspond to a
#  unit test (1-14). The procedures are already translated.
#
if [ $# -lt 1 ]
then
    echo "USAGE: gentest <testno>"
	exit 2
fi
TESTNO=$1
SFC=${GIT_REPO}/sfc
START="Test-Unit-Procedure-${TESTNO}"
INDIR="$SFC/migration/xml/g2/usecase"
OUTDIR=$SFC/migration/xml/ignition/usecase
PYDIR=${SFC}/migration/procs/ignition/usecase
DIRIN="TestUnitProcedure${TESTNO}"
mkdir -p $OUTDIR
rm -rf $OUTDIR/$DIRIN
$SFC/migration/convert "$INDIR" "$OUTDIR" "$PYDIR"  "$START"

PROJ="testunitprocedure${TESTNO}"
INDIR="$SFC/migration/xml/ignition/usecase/$DIRIN"
OUTDIR=$SFC/migration/projects/usecase
mkdir -p $OUTDIR
OUTFIL=${OUTDIR}/$PROJ
rm -f $OUTFIL
$SFC/migration/build-project "$INDIR" "$OUTFIL"
