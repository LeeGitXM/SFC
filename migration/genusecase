
#!/bin/sh
#  Generate projects for import that correspond to 
#  unit tests (1-7)
#
if [ $# -lt 1 ]
then
    echo "USAGE: gentest <testno>"
	exit 2
fi
TESTNO=$1
SFC=${GIT_REPO}/sfc
START="Test-Unit-Procedure-${TESTNO}"
INDIR="$SFC/migration/xml/g2/UnitTests"
OUTDIR=$SFC/migration/xml/ignition/UnitTests
DIRIN="TestUnitProcedure${TESTNO}"
mkdir -p $OUTDIR
rm -rf $OUTDIR/$DIRIN
$SFC/migration/convert "$INDIR" "$OUTDIR" "$START"

PROJ="testunitprocedure${TESTNO}.proj"
INDIR="$SFC/migration/xml/ignition/UnitTests/$DIRIN"
OUTDIR=$SFC/migration/projects/UseCases
mkdir -p $OUTDIR
OUTFIL=${OUTDIR}/$PROJ
rm -f $OUTFIL
$SFC/migration/build-project "$INDIR" "$OUTFIL"
