<?xml version="1.0" ?>
<sfc zoom="0.8333333" canvas="9 15" execution-mode="Callable" version="7.9.0 (b2016101208)" timestamp="Mon Feb 27 13:33:16 CST 2017" hot-editable="false" persist-state="false">
	<step id="2ac6ee47-6b3a-11d9-a9ad-00022dc3c8fd" location="2 1" name="S88Begin_6065" factory-id="begin-step">
<parameters>
	<parameter key="true"><name>Name</name><expression>"Cat-Out"</expression></parameter>
</parameters>
		<associated-data>{}</associated-data>
	</step>
	<step id="0ed33630-6b3c-11d9-a9ad-00022dc3c8fd" location="2 2" name="S88ClearQueueTask_6066" factory-id="com.ils.clearQueueStep"><name>S88ClearQueueTask_6066</name><description></description><id>0ed33630-6b3c-11d9-a9ad-00022dc3c8fd</id>		<associated-data>{}</associated-data>
	</step>
	<step id="dc952fcf-96fb-11d9-b116-00065b88c6c2" location="2 3" name="LogStart" factory-id="action-step">
		<start-script>import system
from ils.sfc.gateway.api import s88Set, s88Get, getDatabaseName, getProviderName, getChartLogger
from ils.common.operatorLogbook import insertForPost
from ils.sfc.common.constants import LOCAL_SCOPE, SUPERIOR_SCOPE, PHASE_SCOPE, OPERATION_SCOPE, GLOBAL_SCOPE

def onStart(chart,block):
	log = getChartLogger(chart)
	log.tracef("Entering %s",block.get("name",""))

	# Write logbook message to the logbook using description of block. 
	post = "XO1RLA3"
	db = getDatabaseName(chart)
	provider = getProviderName(chart)
	grade=s88Get(chart, block, "grade.value", GLOBAL_SCOPE)
	txt = "The catout sequence has been started for grade %s." % (str(grade))	
	insertForPost(post, txt, db)
	
	# Initialize the tag that the window will write to.  This used to be done with 
	# recipe data, but we are using a plain old Vision window, which doesn't have 
	# access to recipe data
	system.tag.write("[%s]Site/CatOut/MODE" % (provider), "waiting")

#	log.tracef("Leaving %s as complete!",block.get("name",""))</start-script>
		<associated-data>{}</associated-data>
	</step>
	<step id="05bb7df0-6c17-11d9-a9ae-000bcd538076" location="2 5" name="Display Confirm" factory-id="com.ils.showWindowStep"><description></description><scale>1.0</scale><windowTitle>Cat Out Confirmation</windowTitle><buttonLabel>Confirm</buttonLabel><security>PUBLIC</security><name>Display Confirm</name><id>05bb7df0-6c17-11d9-a9ae-000bcd538076</id><position>center</position><window>Vistalon/SFC/Catout Confirmation</window>		<associated-data>{}</associated-data>
	</step>
	<step id="03a6491e-85ac-11d9-a871-006008c66680" location="1 9" name="Hide Confirmation" factory-id="com.ils.closeWindowStep"><name>Hide Confirmation</name><description></description><id>03a6491e-85ac-11d9-a871-006008c66680</id><window>Vistalon/SFC/Catout Confirmation</window>		<associated-data>{}</associated-data>
	</step>
	<step id="27a6f6bb-a2dc-11d9-b116-00065b88c6c2" location="3 9" name="Hide Confirmation" factory-id="com.ils.closeWindowStep"><name>Hide Confirmation</name><description></description><id>27a6f6bb-a2dc-11d9-b116-00065b88c6c2</id><window>Vistalon/SFC/Catout Confirmation</window>		<associated-data>{}</associated-data>
	</step>
	<step id="88fbe0b0-6c1f-11d9-a9ae-000bcd538076" location="1 10" name="Abort" factory-id="enclosing-step" chart-path="VistalonUnitProcedure/PolymerizeEpdm/Catout/AbortCleanup" execution-mode="RunUntilCompletion">		<associated-data>{}</associated-data>
	</step>
	<step id="18f94b7e-85b4-11d9-a871-006008c66680" location="3 10" name="Implement" factory-id="enclosing-step" chart-path="VistalonUnitProcedure/PolymerizeEpdm/Catout/ImplementCo/ImplementCo" execution-mode="RunUntilCompletion">		<associated-data>{"r1-outlet-temp":{"lowLimit":0.0,"advice":"","description":"R1 Outlet Temp","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"4b3d246f-6e3e-43c3-a320-a05a9a27cd64","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":72.582,"key":"r1-outlet-temp"},"cat-efficiency":{"lowLimit":0.0,"advice":"","description":"Cat Efficiency","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"a3fef6c4-6185-44db-b082-bcfdf9c73464","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":675.597,"key":"cat-efficiency"},"al-to-va":{"lowLimit":0.0,"advice":"","description":"AL to VA","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"98365f6f-7061-47cc-97d5-e13094df3604","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":5.009,"key":"al-to-va"},"h2-to-va-ratio":{"lowLimit":0.0,"advice":"","description":"H2 / VA","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"95a8e2aa-5cf0-4b6e-9e7d-e50755b9e359","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":23.011,"key":"h2-to-va-ratio"},"r1-c2-conversion":{"lowLimit":0.0,"advice":"","description":"R1 C2 Conversion","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"27d29fe8-7c20-4377-89af-fc195ddd663b","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":87.821,"key":"r1-c2-conversion"},"main-enb-to-c2-ratio":{"lowLimit":0.0,"advice":"","description":"ENB / C2","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"dde9396e-8efc-4b7c-a324-52bac2598ba2","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":0.079,"key":"main-enb-to-c2-ratio"},"r1-cement-concentration":{"lowLimit":0.0,"advice":"","description":"R1 Cement Concentration","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"c4954d29-75ac-4f23-bd93-54ec889e35f1","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":4.156,"key":"r1-cement-concentration"},"r1-inlet-temp":{"lowLimit":0.0,"advice":"","description":"R1 Inlet Temp","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"4a73e4b7-e5e1-46f4-91cf-73ccda735adf","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":-26.045,"key":"r1-inlet-temp"},"r1-enb-conversion":{"lowLimit":0.0,"advice":"","description":"R1 ENB Conversion","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"29f090b5-c52b-43b2-85d5-3a986a4d6d5e","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":54.673,"key":"r1-enb-conversion"},"grade":{"lowLimit":0.0,"advice":"","description":"Grade","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"e429a38b-4344-46e5-b622-a952beed9040","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":3676.0,"key":"grade"},"main-c3-to-c2-ratio":{"lowLimit":0.0,"advice":"","description":"C3 / C2","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"df00ac79-dab8-4be2-b33b-be81bec84f65","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":2.763,"key":"main-c3-to-c2-ratio"},"va-to-c2-ratio":{"lowLimit":0.0,"advice":"","description":"VA / C2","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"5b5f1b54-cc49-4dcb-b801-b303d40e3fc8","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":2.127,"key":"va-to-c2-ratio"},"r1-c3-conversion":{"lowLimit":0.0,"advice":"","description":"R1 C3 Conversion","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"23614630-5d38-4c2b-bd26-d999fd3cb0ab","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":18.664,"key":"r1-c3-conversion"},"main-c2-rate":{"lowLimit":0.0,"advice":"","description":"C2 Rate","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"a7629250-0eab-4926-8b16-20aa0ff03e81","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":12.668,"key":"main-c2-rate"},"nh3-to-va-ratio":{"lowLimit":0.0,"advice":"","description":"NH3 / VA","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"c985f3dc-4b25-4b10-b16c-401ed9b8c079","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":0.0,"key":"nh3-to-va-ratio"},"poly-rate":{"lowLimit":0.0,"advice":"","description":"Production Rate","label":"NA","units":"","type":"Quantity","help":"NA","dataId":"02ea5c45-3ae8-4703-89c6-38ca9d7e5b2e","valueType":"float","highLimit":0.0,"category":"Calculated Value","class":"Value","value":436.873,"key":"poly-rate"}}</associated-data>
	</step>
	<step id="2ac6ee42-6b3a-11d9-a9ad-00022dc3c8fd" location="1 12" name="S88End_13716" factory-id="end-step">		<associated-data>{}</associated-data>
	</step>
	<transition id="513933c0-6c18-11d9-a9ae-000bcd538076" location="1 8" timeout-enabled="true" timeout-delay="108000000" timeout-flag="S88-CONDITIONAL-TRANSITION-XXX-6070">{tag.Site/CatOut/MODE} = "abort"</transition>
	<transition id="80427140-6c18-11d9-a9ae-000bcd538076" location="3 8" timeout-enabled="true" timeout-delay="108000000" timeout-flag="S88-CONDITIONAL-TRANSITION-XXX-6071">{tag.Site/CatOut/MODE} = "proceed-with-capture" || 
{tag.Site/CatOut/MODE} = "proceed"</transition>
	<note id="142f87ee-baec-4453-b3b3-af73fe4d336a" location="4 4" size="5 2">In the old system, the window's response went into recipe 
data, but this is a plain Vision window, so it can't access
recipe data.  Use a plain memory tag instead.  So the 
Enter Data block is eliminated in favor of just doing a tag
write in the callback above.</note>
	<note id="2c331884-9938-4425-8f42-e175f8c9dd8b" location="6 0" size="2 1">Manually vetted by Pete
10/23/2016</note>
	<link id="76c76dfd-4b97-4ec5-af4c-fa38b7888287" location="2 4"><up/><down/></link>
	<link id="402744ef-601b-4bff-bb04-28d1b3c97909" location="2 6"><up/><down/></link>
	<link id="0f1e612a-e681-4f75-8366-ebc59044d9d3" location="1 7"><down/><right/></link>
	<link id="dc8fab36-d88b-4627-81c1-41ada89f2940" location="2 7"><up/><left/><right/></link>
	<link id="74d94274-e16a-4daa-96bb-da15ba6b89a3" location="3 7"><left/><down/></link>
	<link id="e64dceee-6052-4fa8-acee-c12237fcb817" location="1 11"><up/><down/><right/></link>
	<link id="26c1a036-ed62-43da-9624-2eb08f7b1b7e" location="2 11"><up/><left/><right/></link>
	<link id="788aba5c-15a2-4658-8df9-fb5108a5bdeb" location="3 11"><up/><left/><down/></link>

</sfc>
