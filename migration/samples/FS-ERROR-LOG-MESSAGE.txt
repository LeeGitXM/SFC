fs-error-log-message(BLOCK: class s88-recipe-entity) = (symbol {complete, stopped, or error} )

{ Write a message to the operator logbook indicating that a flying switch has terminated with errors as described in the BLOCKs Description. }

P: class ph-procedure-or-method = this procedure;
DEBUG-MODE: truth-value = false; 

Grade, Status: Value;
Msg: text = the description of BLOCK;
LOG-FILE: text = log-files[0];

begin
	if the debug-mode of P or the debug-mode of BLOCK then DEBUG-MODE = true;

	if DEBUG-MODE then post "In [the name of P] with [the label of BLOCK], a [the class of BLOCK]. . .";

	conclude that the state of BLOCK = s88-running-state;

	STATUS, GRADE = call s88-get-data(BLOCK, "new.grade.val", s88-superior-operation);
	if STATUS /= the symbol success then begin
		GRADE = 0;
	end;

	call em-write-file(BLOCK, "[Msg] [the current real time as a time stamp] for grade [GRADE].", log-file); 

	if DEBUG-MODE then post "[the label of BLOCK] has completed!";

	return s88-complete-state;
end 