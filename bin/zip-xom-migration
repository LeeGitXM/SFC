#!/bin/sh
#
# Save the source tree for sfc and common into a zip repository.
# Do not intentionally include build products. Make clean before 
# running this script.
#
#set -x
REPO_ROOT=~/Development/ils/src
SVN=~/Development/ils/svn/EMChemicals/Release/src
VERS=TRANSLATION
TMP=$REPO_ROOT/$VERS
# Cleanup
rm -rf $TMP
cd $REPO_ROOT
mkdir $TMP
cd $REPO_ROOT/sfc/migration
./clear-xml
./clear-procs
rm -f mdb/*.db
cp -a * $TMP
cd mdb
./mkdatabase
cd ..
./copy-procs
./copy-xml
./translate-all
./convert1
./build1
cd ..
cp -a procs $TMP
cp -a xml $TMP

# Now zip and copy to subversion
cd $REPO_ROOT
zip -r sfc-migration.zip $VERS
cp sfc-migration.zip $SVN
rm -rf $TMP
