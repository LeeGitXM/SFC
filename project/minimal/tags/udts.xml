<Tags>
   <Tag name="SFC" path="_types_" type="Folder"/>
   <Tag name="Array" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/DataWithUnits</Property>
      <Parameters>
      </Parameters>
      <Tag name="value" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="Data" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Parameters>
      </Parameters>
      <Tag name="advice" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="chartPath" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="class" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="dataId" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="description" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="help" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="key" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="label" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="valueType" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="DataWithUnits" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/Data</Property>
      <Parameters>
      </Parameters>
      <Tag name="units" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="Download Trigger" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Parameters>
      </Parameters>
      <Tag name="automatedDownload" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">6</Property>
         <Property name="Tooltip">True means fully automatic, False means display recipe screen</Property>
      </Tag>
      <Tag name="database" path="" type="DB">
         <Property name="Value">XOM</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="grade" path="" type="OPC">
         <Property name="Value"/>
         <Property name="DataType">7</Property>
         <EventScripts>
            <Event id="valueChanged" enabled="true">	
	#-----------------------
	def longProcess(tagPath = tagPath, val = currentValue.value):
		from ils.recipeToolkit.download import automatedDownloadHandler
		automatedDownloadHandler(tagPath, val)
	#-----------------------

	# I&apos;m not sure if it is a characteristic of my development system, or of OPC, or 
	# of my Kepware OPC server, but whenever I restart my gateway this trigger fires as 
	# if the OPC tag received a new value.  Since it is highly unlikely for an 
	# automated download to be requested at the same time as the gateway restarts this will 
	# check to see that the system has been running for at least 30 seconds before 
	# honoring any automated download requests.
	runningSeconds = system.tag.read(&quot;[~]Recipe/Constants/runningSeconds&quot;).value
	if runningSeconds != None and currentValue.value != &quot;&quot; and runningSeconds &gt; 30:
		system.util.invokeAsynchronous(longProcess)</Event>
         </EventScripts>
      </Tag>
      <Tag name="post" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="project" path="" type="DB">
         <Property name="Value">XOM</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="recipeKey" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="Input" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/IO</Property>
      <Parameters>
      </Parameters>
   </Tag>
   <Tag name="IO" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/DataWithUnits</Property>
      <Parameters>
      </Parameters>
      <Tag name="errorCode" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="errorText" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="guiLabel" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">2</Property>
      </Tag>
      <Tag name="guiUnits" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="pvMonitorActive" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">6</Property>
      </Tag>
      <Tag name="pvMonitorStatus" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="pvValue" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="tagPath" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="targetValue" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="value" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
   </Tag>
   <Tag name="Matrix" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/DataWithUnits</Property>
      <Parameters>
      </Parameters>
      <Tag name="value" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="Output" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/IO</Property>
      <Parameters>
      </Parameters>
      <Tag name="download" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">6</Property>
      </Tag>
      <Tag name="downloadStatus" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="maxTiming" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="stepTime" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="stepTimestamp" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
         <Property name="FormatString">yyyy-MM-dd h:mm:ss aa</Property>
      </Tag>
      <Tag name="timing" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="type" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="valueType" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="writeConfirm" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">6</Property>
      </Tag>
      <Tag name="writeConfirmed" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">6</Property>
      </Tag>
   </Tag>
   <Tag name="OutputRamp" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/Output</Property>
      <Parameters>
      </Parameters>
      <Tag name="rampTime" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="updateFrequency" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
   </Tag>
   <Tag name="Recipe Details" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Parameters>
      </Parameters>
      <Tag name="command" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
         <EventScripts>
            <Event id="valueChanged" enabled="true">	
	#-----------------------
	def longProcess(tagPath = tagPath, val = currentValue.value):
		import ils.io.wrapper as wrapper
		wrapper.writeRecipeDetail(tagPath, val)
	#-----------------------
	
	if currentValue.value != &quot;&quot;:
		system.util.invokeAsynchronous(longProcess)	</Event>
         </EventScripts>
      </Tag>
      <Tag name="highLimitTagName" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="lowLimitTagName" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="valueTagName" path="" type="DB">
         <Property name="Value">0</Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="SQC" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/DataWithUnits</Property>
      <Parameters>
      </Parameters>
      <Tag name="highLimit" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="lowLimit" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="targetValue" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
   </Tag>
   <Tag name="Structure" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/Data</Property>
      <Parameters>
      </Parameters>
      <Tag name="value" path="" type="DB">
         <Property name="Value"></Property>
         <Property name="DataType">7</Property>
      </Tag>
   </Tag>
   <Tag name="Value" path="_types_/SFC" type="UDT_DEF">
      <Property name="Value"/>
      <Property name="DataType">2</Property>
      <Property name="UDTParentType">SFC/DataWithUnits</Property>
      <Parameters>
      </Parameters>
      <Tag name="category" path="" type="DB">
         <Property name="Value">Operator Input</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="highLimit" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="lowLimit" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
      <Tag name="type" path="" type="DB">
         <Property name="Value">float</Property>
         <Property name="DataType">7</Property>
      </Tag>
      <Tag name="value" path="" type="DB">
         <Property name="Value">0.0</Property>
         <Property name="DataType">5</Property>
      </Tag>
   </Tag>
</Tags>
